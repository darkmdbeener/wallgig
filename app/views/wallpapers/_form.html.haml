= simple_form_for(@wallpaper) do |f|
  = f.error_notification

  - unless @wallpaper.persisted? || current_user.staff? || current_user.trusted?
    .alert.alert-warning
      %h4 Important
      %p
        Please read our
        %a{:href => 'https://github.com/wallgig/wallgig/wiki/Purity-Guide', :target => '_blank'} purity guidelines here
        before submitting!
      %p.text-danger Your wallpaper will be submitted for moderator approval.

  %hr/

  .form-inputs
    = f.input :purity unless @wallpaper.purity_locked?
    = f.input :image, as: :file unless @wallpaper.persisted?
    / = f.input :category_id, collection: @available_categories, label_method: :name_for_selects, value_method: :id, include_blank: true, hint: 'Try to set the deepest possible category'
    / .form-group
    /   = f.label :tag_list, label: 'Tags'
    /   = f.text_field :tag_list, class: 'form-control', autocomplete: 'off', data: { provide: 'tag_editor', search_path: api_v1_tags_path }
    .form-group
      = label_tag 'Tags'
      = text_field_tag :tag, nil, data: { provide: 'tag-search' }, class: 'typeahead form-control'
    .form-group
      %ul.list-tag.list-group{:data => {:provide => 'tag-list'}}
        - @wallpaper.tags.each do |tag|
          .list-group-item{:data => {:tag_id => tag.id}}
            %a{:class => 'pull-right', :data => {:action => 'remove'}} 
              %span.glyphicon.glyphicon-remove
            %span{:class => "purity-#{tag.purity}"}
              %span.glyphicon.glyphicon-tag
              = tag.name
            %br/
            = tag.category_name
            = hidden_field_tag 'wallpaper[tag_ids][]', tag.id, id: nil
  
    = f.input :source, hint: 'Enter URL or Artist'
    = f.input :image_gravity, label: 'Crop position'

  .form-actions
    = f.button :submit, class: 'btn btn-primary'
